var O;if(O){if("object"!=typeof O)throw new Error("O already exists & is not 1 object")}else O={};if(O.Ajax)throw new Error("O.Dialog already exists");var lst_pres=[],lst_fac=[];O.Ajax={addService:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},editService:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},delService:function(a){var t={mod:"delService",svc_num:a};$.ajax({method:"POST",url:"ajax.php",data:t,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},getService:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,dataType:"json",cache:!1}).done(function(a){var t=a;$("#js_get_service .name").html($("#cli_nom").val()),$("#js_get_service .pname").html($("#cli_prenom").val()),$("#js_get_service .tech").html(t.fam_libelle),$("#js_get_service .date").html(t.svc_date),$("#js_get_service #details").html(t.svc_details)})},addDepense:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(a){$(".return").html(a),setTimeout(function(){location.reload()},500)})},addClient:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},editClient:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},delClient:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.href="index.php"},500)})},getPres:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,dataType:"json",cache:!1}).done(function(a){$.each(a,function(a,t){$("#prestations").append('<tr data-pres-num="'+t.pres_num+'"><td>'+t.pres_libelle+'</td><td class="price" data-price="'+t.pres_prix+'"><input type="text" value="'+t.pres_prix_build+'" disabled="disabled"></td></tr>')}),$("#prestations tr").on("click",function(){$(this).toggleClass("selected");var a=lst_pres.indexOf($(this).data("pres-num"));a>-1?lst_pres.splice(a):lst_pres.push($(this).data("pres-num"))})})},addPrestation:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},delPresFac:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},validateFac:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},delFac:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){window.location.href="index.php"},500)})},addPai:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1})},getWaitingFac:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,dataType:"json",cache:!1}).done(function(a){$.each(a,function(a,t){$("#factures").append('<tr data-fac-num="'+t.fac_num+'"><td>'+t.fac_num+"</td><td>"+t.cli_nom+"</td><td>"+t.cli_prenom+"</td></tr>")}),$("#factures tr").on("click",function(){$(this).toggleClass("selected");var a=lst_fac.indexOf($(this).data("fac-num"));a>-1?lst_fac.splice(a):lst_fac.push($(this).data("fac-num"))})})},addWaitingFac:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},delIncludedFac:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1}).done(function(){setTimeout(function(){location.reload()},500)})},sessionSetter:function(a){$.ajax({method:"POST",url:"ajax.php",data:a,cache:!1})}};